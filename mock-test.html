<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Verbal Time - Mock Test</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
<header>
    <img src="C:\Users\ftpav\Pictures\Screenshots\Screenshot 2024-12-08 161822.png" alt="Logo" class="header-image">
    <h1>Verbal Time - Mock Test</h1>
</header>
<nav>
    <a href="">Home</a>
    <a href="quiz.html">Practice</a>
</nav>
<div class="container">
    <div class="card">
        <h2>Mock Test - <span id="testLevel"></span></h2>
        <div id="timer"></div>
        <form id="quizForm">
            <!-- Questions will be dynamically generated here -->
        </form>
        <button id="submitBtn" onclick="submitQuiz()">Submit</button>
    </div>
</div>
<footer>
    <p>&copy; 2023 Verbal Time. All rights reserved.</p>
</footer>
<script>
const pageSize = 10; // Number of questions per page
let currentPage = 1;

async function fetchQuestions(level, page) {
    const response = await fetch(`https://api.example.com/quiz?level=${level}&page=${page}&pageSize=${pageSize}`);
    const data = await response.json();
    return data.questions;
}

function showQuiz(level) {
    document.getElementById('testLevel').textContent = `Level ${level}`;
    document.getElementById('quizForm').innerHTML = '';

    const timeLimit = 25 - (level - 1) * 5;
    let timeLeft = timeLimit * 60;
    const timer = setInterval(() => {
        timeLeft--;
        document.getElementById('timer').textContent = `Time left: ${Math.floor(timeLeft / 60)}:${timeLeft % 60 < 10 ? '0' : ''}${timeLeft % 60}`;
        if (timeLeft <= 0) {
            clearInterval(timer);
            submitQuiz();
        }
    }, 1000);

    fetchQuestions(level, currentPage).then(questions => {
        questions.forEach((q, index) => {
            const options = [q.answer, "Option 2", "Option 3", "Option 4"];
            // Randomize the order of options
            const shuffledOptions = options.sort(() => 0.5 - Math.random());

            const questionDiv = document.createElement('div');
            questionDiv.innerHTML = `
                <p>${index + 1}. ${q.question}</p>
                ${shuffledOptions.map((option, i) => `<input type="radio" name="answer${index + 1}" value="${option}"> ${option}<br>`).join('')}
            `;
            document.getElementById('quizForm').appendChild(questionDiv);
        });
    });
}

function submitQuiz() {
    const questions = document.querySelectorAll('#quizForm div');
    const answers = [];

    questions.forEach((q, index) => {
        const selectedAnswer = q.querySelector(`input[name="answer${index + 1}"]:checked`);
        const answer = selectedAnswer ? selectedAnswer.value : '';
        answers.push({ question: q.querySelector('p').textContent, answer: answer, correct: q.querySelector('input[type="radio"][value="correct"]').value });
    });

    const correctAnswers = answers.filter(a => a.answer.toLowerCase() === a.correct.toLowerCase()).length;
    const totalQuestions = questions.length;
    const result = `You answered ${correctAnswers} out of ${totalQuestions} questions correctly.`;

    alert(result);
    document.getElementById('quizForm').innerHTML = `<p>${result}</p>`;
}

function nextPage() {
    currentPage++;
    showQuiz(level);
}

function prevPage() {
    if (currentPage > 1) {
        currentPage--;
        showQuiz(level);
    }
}

const urlParams = new URLSearchParams(window.location.search);
const level = urlParams.get('level');
if (level) {
    showQuiz(level);
}
</script>
</head>
<body>
<header>
    <img src="C:\Users\ftpav\Pictures\Screenshots\Screenshot 2024-12-08 161822.png" alt="Logo" class="header-image">
    <h1>Verbal Time - Mock Test</h1>
</header>
<nav>
    <a href="">Home</a>
    <a href="quiz.html">Practice</a>
</nav>
<div class="container">
    <div class="card">
        <h2>Mock Test - <span id="testLevel"></span></h2>
        <div id="timer"></div>
        <form id="quizForm">
            <!-- Questions will be dynamically generated here -->
        </form>
        <button id="submitBtn" onclick="submitQuiz()">Submit</button>
        <div id="pagination">
            <button onclick="prevPage()">Previous</button>
            <button onclick="nextPage()">Next</button>
        </div>
    </div>
</div>
<footer>
    <p>&copy; 2023 Verbal Time. All rights reserved.</p>
</footer>
</body>
</html>
</body>
</html>
